{{/* Display author list. */}}

{{- $taxonomy := "authors" }}
{{ if .Param $taxonomy }}
  {{ range $index, $value := (.GetTerms $taxonomy) }}
    {{- /* Highlight the author's name? */ -}}
    {{- $highlight_name := .Page.Params.highlight_name | default false -}}

    {{/* --- MODIFICATION START: Get Display Name --- */}}
    {{ $display_name := $value.LinkTitle }}
    {{ with .Page }}
      {{ if .Params.display_name_short }}
        {{ $display_name = .Params.display_name_short }}
      {{ end }}
    {{ end }}
    {{/* --- MODIFICATION END: Get Display Name --- */}}

    {{- if gt $index 0 }}, {{ end -}}

    {{/* --- FIX START: Correctly applying 'author-highlighted' class --- */}}

    {{ if $highlight_name }}<span class="author-highlighted">{{ end }}

      {{/* Effectively check the page's `_build` option as `_build` is not exposed in Hugo's Page object. */}}
      {{- if .RelPermalink -}}
        <a href="{{.RelPermalink}}">{{ $display_name }}</a>
      {{- else -}}
        {{ $display_name }}
      {{- end -}}

    {{ if $highlight_name }}</span>{{ end }}

    {{/* --- FIX END: Correctly applying 'author-highlighted' class --- */}}

    {{- if isset $.Params "author_notes" -}}
      {{- with (index $.Params.author_notes $index) -}}
        <i class="author-notes fas fa-info-circle" data-toggle="tooltip" title="{{.}}"></i>
      {{- end -}}
    {{- end -}}
  {{- end -}}
{{- end -}}
